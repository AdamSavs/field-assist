<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Example</title>
</head>
<body>

<section class="form">
    <label>Display Name:
        <input ref="name" type="text" pattern="[a-zA-Z ]*">
    </label>
    <div class="bio">
        <label>About myself <br>
            <textarea ref="generalBio" cols="30" rows="10"></textarea>
        </label><br>
    </div>
    <div class="main-language">
        <label>Main Language
            <select autocomplete="on" ref="preferredLanguage">
                <option value="English">English</option>
                <option value="German">German</option>
                <option value="French">French</option>
            </select>
        </label>
    </div>
    <button>Send All</button>
    <label class="errors">
        Illegal values:
        <div id="errors"></div>
    </label>
</section>
</body>
<style>
    section.form {
        display: flex;
        flex-direction: column;

    }

    button {
        width: 10em;
    }

    label {
        color: #084545;
    }

    .errors {
        color: red;
    }
</style>
<script type="module">
    import {populateFields} from "../lib/field-assist.js";
    import {collectValues, getFieldAndValue} from "../lib/field-assist.js";

    const values = {
        name: 'Albert Einstein',
        generalBio: 'I was a cool genius',
        preferredLanguage: 'German',

    }

    populateFields(document.body, values)
    document.body.oninput = (event) => {
        // this option updates a single field:
        const {field, value} = getFieldAndValue(event);
        console.dir({[field]: value})

        document.getElementById('errors').textContent = JSON.stringify(collectValues(document.body)._errors, ' ')

    }
    document.body.querySelector('button').onclick = () => {
        console.dir(collectValues(document.body))
    }

</script>


</html>